# PhÃ¢n TÃ­ch SÆ¡ Äá»“ Activity Diagram - Äiá»ƒm Danh Sinh ViÃªn

## ğŸ“Š So SÃ¡nh SÆ¡ Äá»“ vá»›i Há»‡ Thá»‘ng Thá»±c Táº¿

### ğŸ” SÆ¡ Äá»“ Hiá»‡n Táº¡i (Trong HÃ¬nh)

```
STUDENT                          Há»† THá»NG
   â—
   â”‚
   â–¼
Truy cáº­p trang Ä‘iá»ƒm danh â”€â”€â”€â”€â†’ Hiá»ƒn thá»‹ trang chi tiáº¿t
                                hoáº¡t Ä‘á»™ng vÃ  pháº§n Ä‘iá»ƒm danh
   â”‚
   â”‚
   â–¼
Nháº­p cÃ¡c thÃ´ng cáº§n thiáº¿t â”€â”€â”€â”€â†’ Kiá»ƒm tra tÃ­nh há»£p lá»‡
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                       â”‚
                Há»£p lá»‡?                 KhÃ´ng há»£p lá»‡?
                    â”‚                       â”‚
                    â–¼                       â–¼
        Hiá»ƒn thá»‹ thÃ´ng bÃ¡o      Hiá»ƒn thá»‹ thÃ´ng bÃ¡o lá»—i
        Ä‘iá»ƒm danh thÃ nh cÃ´ng    â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
                    âš«
```

---

## âœ… Äiá»ƒm ÄÃºng trong SÆ¡ Äá»“

1. **Cáº¥u trÃºc Swimlanes**: PhÃ¢n chia rÃµ rÃ ng giá»¯a STUDENT vÃ  Há»† THá»NG âœ“
2. **Äiá»ƒm báº¯t Ä‘áº§u vÃ  káº¿t thÃºc**: CÃ³ Ä‘áº§y Ä‘á»§ Initial Node vÃ  Final Node âœ“
3. **Decision Node**: CÃ³ Ä‘iá»ƒm quyáº¿t Ä‘á»‹nh "Kiá»ƒm tra tÃ­nh há»£p lá»‡" âœ“
4. **Xá»­ lÃ½ lá»—i**: CÃ³ nhÃ¡nh xá»­ lÃ½ lá»—i vÃ  cho phÃ©p nháº­p láº¡i âœ“
5. **Luá»“ng cÆ¡ báº£n**: CÃ¡c bÆ°á»›c cÆ¡ báº£n Ä‘Æ°á»£c sáº¯p xáº¿p há»£p lÃ½ âœ“

---

## âŒ Äiá»ƒm Thiáº¿u SÃ³t vÃ  Sai So vá»›i Há»‡ Thá»‘ng Thá»±c Táº¿

### 1. **Thiáº¿u Kiá»ƒm Tra ÄÄƒng KÃ½ vÃ  Duyá»‡t**

**Sai sÃ³t:**
- SÆ¡ Ä‘á»“ khÃ´ng kiá»ƒm tra sinh viÃªn Ä‘Ã£ Ä‘Äƒng kÃ½ hoáº¡t Ä‘á»™ng chÆ°a
- KhÃ´ng kiá»ƒm tra sinh viÃªn Ä‘Ã£ Ä‘Æ°á»£c duyá»‡t tham gia chÆ°a (approvalStatus = 'approved')

**Thá»±c táº¿ trong code:**
```typescript
// Kiá»ƒm tra user Ä‘Ã£ Ä‘Äƒng kÃ½ vÃ  Ä‘Æ°á»£c duyá»‡t
const userParticipant = activity.participants.find(p => 
  p.userId.toString() === userId && p.approvalStatus === 'approved'
);

if (!userParticipant) {
  return NextResponse.json(
    { success: false, message: 'Báº¡n chÆ°a Ä‘Äƒng kÃ½ hoáº·c chÆ°a Ä‘Æ°á»£c duyá»‡t tham gia hoáº¡t Ä‘á»™ng nÃ y' },
    { status: 400 }
  );
}
```

**Äá» xuáº¥t:** ThÃªm decision node kiá»ƒm tra:
- [ÄÃ£ Ä‘Äƒng kÃ½?]
- [ÄÃ£ Ä‘Æ°á»£c duyá»‡t?]

---

### 2. **Thiáº¿u Kiá»ƒm Tra XÃ¡c Thá»±c (Authentication)**

**Sai sÃ³t:**
- SÆ¡ Ä‘á»“ khÃ´ng Ä‘á» cáº­p Ä‘áº¿n viá»‡c kiá»ƒm tra JWT token
- KhÃ´ng kiá»ƒm tra quyá»n truy cáº­p

**Thá»±c táº¿ trong code:**
```typescript
const user = await getUserFromRequest(request);
if (!user) {
  return NextResponse.json(
    { success: false, message: 'Unauthorized' },
    { status: 401 }
  );
}
```

**Äá» xuáº¥t:** ThÃªm bÆ°á»›c "Kiá»ƒm tra xÃ¡c thá»±c (JWT token)" sau khi nháº­n yÃªu cáº§u tá»« sinh viÃªn.

---

### 3. **Thiáº¿u Kiá»ƒm Tra Vá»‹ TrÃ­ GPS**

**Sai sÃ³t:**
- SÆ¡ Ä‘á»“ khÃ´ng Ä‘á» cáº­p Ä‘áº¿n viá»‡c yÃªu cáº§u quyá»n truy cáº­p vá»‹ trÃ­
- KhÃ´ng kiá»ƒm tra vá»‹ trÃ­ GPS cÃ³ trong pháº¡m vi cho phÃ©p khÃ´ng
- KhÃ´ng tÃ­nh toÃ¡n khoáº£ng cÃ¡ch tá»« vá»‹ trÃ­ sinh viÃªn Ä‘áº¿n Ä‘á»‹a Ä‘iá»ƒm hoáº¡t Ä‘á»™ng

**Thá»±c táº¿ trong code:**
```typescript
// YÃªu cáº§u quyá»n GPS
navigator.geolocation.getCurrentPosition(
  (position) => {
    const userLat = position.coords.latitude;
    const userLng = position.coords.longitude;
    // Kiá»ƒm tra vá»‹ trÃ­
  }
);

// Kiá»ƒm tra vá»‹ trÃ­ trong pháº¡m vi
function calculateDistance(lat1, lon1, lat2, lon2): number {
  // Haversine formula
  const R = 6371e3; // Earth's radius in meters
  // ... tÃ­nh toÃ¡n khoáº£ng cÃ¡ch
}

// Kiá»ƒm tra trong pháº¡m vi
const distance = calculateDistance(
  userLocation.lat, userLocation.lng,
  activityLocation.lat, activityLocation.lng
);

if (distance > activityLocation.radius) {
  return NextResponse.json(
    { success: false, message: 'Vá»‹ trÃ­ Ä‘iá»ƒm danh khÃ´ng há»£p lá»‡. Vui lÃ²ng Ä‘áº¿n Ä‘Ãºng Ä‘á»‹a Ä‘iá»ƒm hoáº¡t Ä‘á»™ng' },
    { status: 400 }
  );
}
```

**Äá» xuáº¥t:** ThÃªm cÃ¡c bÆ°á»›c:
- "YÃªu cáº§u quyá»n truy cáº­p vá»‹ trÃ­ (GPS)"
- "Láº¥y tá»a Ä‘á»™ GPS hiá»‡n táº¡i"
- "Kiá»ƒm tra vá»‹ trÃ­ trong pháº¡m vi cho phÃ©p"
- Decision node: [Vá»‹ trÃ­ há»£p lá»‡?]

---

### 4. **Thiáº¿u Chá»n Buá»•i vÃ  Loáº¡i Äiá»ƒm Danh**

**Sai sÃ³t:**
- SÆ¡ Ä‘á»“ khÃ´ng Ä‘á» cáº­p Ä‘áº¿n viá»‡c chá»n buá»•i (Buá»•i SÃ¡ng, Buá»•i Chiá»u, Buá»•i Tá»‘i)
- KhÃ´ng cÃ³ loáº¡i Ä‘iá»ƒm danh (start - Ä‘áº§u buá»•i, end - cuá»‘i buá»•i)

**Thá»±c táº¿ trong code:**
```typescript
// Sinh viÃªn pháº£i chá»n:
- timeSlot: 'Buá»•i SÃ¡ng' | 'Buá»•i Chiá»u' | 'Buá»•i Tá»‘i'
- checkInType: 'start' | 'end'

// Kiá»ƒm tra buá»•i cÃ³ active khÃ´ng
const timeSlot = activity.timeSlots.find(ts => 
  ts.name === timeSlotName && ts.isActive
);

if (!timeSlot) {
  return NextResponse.json(
    { success: false, message: 'Buá»•i Ä‘iá»ƒm danh khÃ´ng há»£p lá»‡' },
    { status: 400 }
  );
}
```

**Äá» xuáº¥t:** ThÃªm bÆ°á»›c "Chá»n buá»•i vÃ  loáº¡i Ä‘iá»ƒm danh (start/end)" trÆ°á»›c khi nháº­p thÃ´ng tin.

---

### 5. **Thiáº¿u Chá»¥p áº¢nh (Optional)**

**Sai sÃ³t:**
- SÆ¡ Ä‘á»“ khÃ´ng Ä‘á» cáº­p Ä‘áº¿n viá»‡c chá»¥p áº£nh Ä‘iá»ƒm danh
- KhÃ´ng cÃ³ bÆ°á»›c upload áº£nh lÃªn Cloudinary

**Thá»±c táº¿ trong code:**
```typescript
// Chá»¥p áº£nh (optional)
const [showCamera, setShowCamera] = useState(false);
const [capturedPhoto, setCapturedPhoto] = useState<string | null>(null);

// Upload áº£nh lÃªn Cloudinary
if (photoDataUrl) {
  const formData = new FormData();
  formData.append('file', photoDataUrl);
  // Upload to Cloudinary
}
```

**Äá» xuáº¥t:** ThÃªm bÆ°á»›c "Chá»¥p áº£nh Ä‘iá»ƒm danh (tÃ¹y chá»n)" sau khi láº¥y vá»‹ trÃ­ GPS.

---

### 6. **Thiáº¿u Kiá»ƒm Tra Thá»i Gian Äiá»ƒm Danh**

**Sai sÃ³t:**
- SÆ¡ Ä‘á»“ khÃ´ng kiá»ƒm tra thá»i gian Ä‘iá»ƒm danh cÃ³ há»£p lá»‡ khÃ´ng
- KhÃ´ng xá»­ lÃ½ trÆ°á»ng há»£p Ä‘iá»ƒm danh trá»… hoáº·c sá»›m

**Thá»±c táº¿ trong code:**
```typescript
// Kiá»ƒm tra thá»i gian Ä‘iá»ƒm danh
const checkInTime = new Date();
const timeSlotStart = new Date(`${activityDate} ${timeSlot.startTime}`);
const timeSlotEnd = new Date(`${activityDate} ${timeSlot.endTime}`);

// Kiá»ƒm tra trá»…
if (checkInType === 'start' && checkInTime > timeSlotStart + 15 minutes) {
  // Hiá»ƒn thá»‹ modal yÃªu cáº§u nháº­p lÃ½ do trá»…
  setShowLateModal(true);
  setLateInfo({ minutes, slotName, checkInType });
}
```

**Äá» xuáº¥t:** ThÃªm decision node:
- [ÄÃºng giá»?]
- [Trá»…?] â†’ YÃªu cáº§u nháº­p lÃ½ do trá»…
- [Sá»›m?] â†’ Cáº£nh bÃ¡o

---

### 7. **Thiáº¿u LÆ°u Trá»¯ Dá»¯ Liá»‡u**

**Sai sÃ³t:**
- SÆ¡ Ä‘á»“ káº¿t thÃºc ngay sau khi hiá»ƒn thá»‹ thÃ´ng bÃ¡o thÃ nh cÃ´ng
- KhÃ´ng cÃ³ bÆ°á»›c lÆ°u trá»¯ dá»¯ liá»‡u vÃ o database

**Thá»±c táº¿ trong code:**
```typescript
// TÃ¬m hoáº·c táº¡o Attendance document
let attendanceDoc = await Attendance.findOne({
  activityId: new mongoose.Types.ObjectId(activityId),
  userId: new mongoose.Types.ObjectId(userId)
});

if (!attendanceDoc) {
  // Táº¡o má»›i
  attendanceDoc = new Attendance({
    activityId,
    userId,
    studentName: user.name,
    studentEmail: user.email,
    studentId: user.studentId,
    attendances: []
  });
}

// ThÃªm attendance record
attendanceDoc.attendances.push({
  timeSlot,
  checkInType,
  checkInTime: new Date(),
  location: { lat, lng, address },
  photoUrl: uploadedPhotoUrl || null,
  status: 'pending' // Chá» duyá»‡t
});

// LÆ°u vÃ o database
await attendanceDoc.save();
```

**Äá» xuáº¥t:** ThÃªm bÆ°á»›c "LÆ°u trá»¯ thÃ´ng tin Ä‘iá»ƒm danh vÃ o database" trÆ°á»›c khi hiá»ƒn thá»‹ thÃ´ng bÃ¡o thÃ nh cÃ´ng.

---

### 8. **Thiáº¿u Kiá»ƒm Tra Hoáº¡t Äá»™ng Tá»“n Táº¡i**

**Sai sÃ³t:**
- SÆ¡ Ä‘á»“ khÃ´ng kiá»ƒm tra hoáº¡t Ä‘á»™ng cÃ³ tá»“n táº¡i khÃ´ng
- KhÃ´ng kiá»ƒm tra tráº¡ng thÃ¡i hoáº¡t Ä‘á»™ng (published, ongoing, completed)

**Thá»±c táº¿ trong code:**
```typescript
// TÃ¬m hoáº¡t Ä‘á»™ng
const activity = await Activity.findById(activityId);
if (!activity) {
  return NextResponse.json(
    { success: false, message: 'KhÃ´ng tÃ¬m tháº¥y hoáº¡t Ä‘á»™ng' },
    { status: 404 }
  );
}

// Kiá»ƒm tra tráº¡ng thÃ¡i
if (activity.status !== 'published' && activity.status !== 'ongoing') {
  return NextResponse.json(
    { success: false, message: 'Hoáº¡t Ä‘á»™ng nÃ y khÃ´ng cho phÃ©p Ä‘iá»ƒm danh' },
    { status: 400 }
  );
}
```

**Äá» xuáº¥t:** ThÃªm decision node:
- [Hoáº¡t Ä‘á»™ng tá»“n táº¡i?]
- [Tráº¡ng thÃ¡i há»£p lá»‡?]

---

### 9. **Thiáº¿u Xá»­ LÃ½ Multi-Time Locations**

**Sai sÃ³t:**
- SÆ¡ Ä‘á»“ khÃ´ng Ä‘á» cáº­p Ä‘áº¿n viá»‡c hoáº¡t Ä‘á»™ng cÃ³ nhiá»u Ä‘á»‹a Ä‘iá»ƒm theo tá»«ng buá»•i
- KhÃ´ng kiá»ƒm tra Ä‘á»‹a Ä‘iá»ƒm Ä‘Ãºng cho buá»•i Ä‘Æ°á»£c chá»n

**Thá»±c táº¿ trong code:**
```typescript
// Kiá»ƒm tra multi-time locations
if (activity.multiTimeLocations && activity.multiTimeLocations.length > 0) {
  // TÃ¬m Ä‘á»‹a Ä‘iá»ƒm cho buá»•i Ä‘Æ°á»£c chá»n
  const locationForSlot = activity.multiTimeLocations.find(
    loc => loc.timeSlot === selectedTimeSlot
  );
  
  if (locationForSlot) {
    // Kiá»ƒm tra vá»‹ trÃ­ vá»›i Ä‘á»‹a Ä‘iá»ƒm nÃ y
    const distance = calculateDistance(
      userLocation.lat, userLocation.lng,
      locationForSlot.location.lat, locationForSlot.location.lng
    );
    
    if (distance > locationForSlot.radius) {
      // Vá»‹ trÃ­ khÃ´ng há»£p lá»‡
    }
  }
}
```

**Äá» xuáº¥t:** ThÃªm bÆ°á»›c "XÃ¡c Ä‘á»‹nh Ä‘á»‹a Ä‘iá»ƒm cho buá»•i Ä‘Æ°á»£c chá»n" vÃ  kiá»ƒm tra vá»‹ trÃ­ vá»›i Ä‘á»‹a Ä‘iá»ƒm Ä‘Ã³.

---

### 10. **Thiáº¿u Tráº¡ng ThÃ¡i Äiá»ƒm Danh (Pending/Approved/Rejected)**

**Sai sÃ³t:**
- SÆ¡ Ä‘á»“ khÃ´ng Ä‘á» cáº­p Ä‘áº¿n viá»‡c Ä‘iá»ƒm danh cáº§n Ä‘Æ°á»£c duyá»‡t
- KhÃ´ng cÃ³ tráº¡ng thÃ¡i Ä‘iá»ƒm danh (pending, approved, rejected)

**Thá»±c táº¿ trong code:**
```typescript
// Táº¡o attendance record vá»›i status = 'pending'
attendanceDoc.attendances.push({
  // ...
  status: 'pending', // Chá» duyá»‡t
  verifiedBy: null,
  verifiedAt: null
});

// Sau khi admin duyá»‡t:
attendanceRecord.status = 'approved';
attendanceRecord.verifiedBy = adminUserId;
attendanceRecord.verifiedAt = new Date();
```

**Äá» xuáº¥t:** ThÃªm thÃ´ng tin vá» tráº¡ng thÃ¡i Ä‘iá»ƒm danh vÃ  quy trÃ¬nh duyá»‡t.

---

## ğŸ“ SÆ¡ Äá»“ Äá» Xuáº¥t (Äáº§y Äá»§ vÃ  ChÃ­nh XÃ¡c)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              SINH VIÃŠN                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â—                                                                         â”‚
â”‚   â”‚                                                                         â”‚
â”‚   â–¼                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ Truy cáº­p trang Ä‘iá»ƒm danh hoáº¡t Ä‘á»™ng Ä‘Ã£ Ä‘Äƒng kÃ½                â”‚       â”‚
â”‚   â”‚ /student/attendance/[activityId]                               â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                       â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       â”‚                        Há»† THá»NG                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ Kiá»ƒm tra xÃ¡c thá»±c (JWT token)                                  â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”                                                  â”‚
â”‚                    â”‚ [XÃ¡c thá»±c]                                            â”‚
â”‚                    â”‚ thÃ nh cÃ´ng?                                           â”‚
â”‚                    â””â”€â”€â”¬â”€â”€â”˜                                                  â”‚
â”‚                       â”‚                                                     â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚          CÃ³â”‚                     â”‚KhÃ´ng                                   â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚            â–¼                     â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚   â”‚ TÃ¬m kiáº¿m hoáº¡t    â”‚  â”‚ Tráº£ vá» lá»—i:      â”‚                             â”‚
â”‚   â”‚ Ä‘á»™ng trong DB    â”‚  â”‚ "Unauthorized"   â”‚                             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚            â–¼                     â”‚                                         â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”       â”‚                                         â”‚
â”‚                    â”‚ [Hoáº¡t Ä‘á»™ng]â”‚       â”‚                                         â”‚
â”‚                    â”‚ tá»“n táº¡i?    â”‚       â”‚                                         â”‚
â”‚                    â””â”€â”€â”¬â”€â”€â”˜       â”‚                                         â”‚
â”‚                       â”‚          â”‚                                         â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚          CÃ³â”‚                     â”‚KhÃ´ng                                   â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚            â–¼                     â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚   â”‚ Kiá»ƒm tra user Ä‘Ã£ â”‚  â”‚ Tráº£ vá» lá»—i:      â”‚                             â”‚
â”‚   â”‚ Ä‘Äƒng kÃ½ vÃ  Ä‘Æ°á»£c  â”‚  â”‚ "KhÃ´ng tÃ¬m tháº¥y  â”‚                             â”‚
â”‚   â”‚ duyá»‡t chÆ°a?      â”‚  â”‚ hoáº¡t Ä‘á»™ng"       â”‚                             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚            â–¼                     â”‚                                         â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”       â”‚                                         â”‚
â”‚                    â”‚ [ÄÃ£ Ä‘Äƒng kÃ½]â”‚       â”‚                                         â”‚
â”‚                    â”‚ vÃ  Ä‘Æ°á»£c     â”‚       â”‚                                         â”‚
â”‚                    â”‚ duyá»‡t?      â”‚       â”‚                                         â”‚
â”‚                    â””â”€â”€â”¬â”€â”€â”˜       â”‚                                         â”‚
â”‚                       â”‚          â”‚                                         â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚          CÃ³â”‚                     â”‚KhÃ´ng                                   â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚            â–¼                     â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚   â”‚ Hiá»ƒn thá»‹ giao    â”‚  â”‚ Tráº£ vá» lá»—i:      â”‚                             â”‚
â”‚   â”‚ diá»‡n Ä‘iá»ƒm danh   â”‚  â”‚ "Báº¡n chÆ°a Ä‘Äƒng kÃ½â”‚                             â”‚
â”‚   â”‚ - Danh sÃ¡ch      â”‚  â”‚ hoáº·c chÆ°a Ä‘Æ°á»£c   â”‚                             â”‚
â”‚   â”‚   timeSlots      â”‚  â”‚ duyá»‡t tham gia   â”‚                             â”‚
â”‚   â”‚ - NÃºt Ä‘iá»ƒm danh  â”‚  â”‚ hoáº¡t Ä‘á»™ng nÃ y"   â”‚                             â”‚
â”‚   â”‚   cho tá»«ng buá»•i  â”‚  â”‚                  â”‚                             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚                       â”‚                                                     â”‚
â”‚                    â•â•â•â•ªâ•â•â•                                                  â”‚
â”‚                       â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       â”‚                      SINH VIÃŠN                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ Chá»n buá»•i muá»‘n Ä‘iá»ƒm danh                                       â”‚       â”‚
â”‚   â”‚ (Buá»•i SÃ¡ng/Buá»•i Chiá»u/Buá»•i Tá»‘i)                               â”‚       â”‚
â”‚   â”‚ Chá»n loáº¡i Ä‘iá»ƒm danh (start/end)                                â”‚       â”‚
â”‚   â”‚ Nháº¥n nÃºt "Äiá»ƒm danh"                                          â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ YÃªu cáº§u quyá»n truy cáº­p vá»‹ trÃ­ (GPS)                            â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”                                                  â”‚
â”‚                    â”‚ [GPS]                                                  â”‚
â”‚                    â”‚ Ä‘Æ°á»£c cáº¥p?                                              â”‚
â”‚                    â””â”€â”€â”¬â”€â”€â”˜                                                  â”‚
â”‚                       â”‚                                                     â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚          CÃ³â”‚                     â”‚KhÃ´ng                                   â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚            â–¼                     â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚   â”‚ Láº¥y tá»a Ä‘á»™ GPS   â”‚  â”‚ Hiá»ƒn thá»‹ thÃ´ng   â”‚                             â”‚
â”‚   â”‚ hiá»‡n táº¡i         â”‚  â”‚ bÃ¡o: "Vui lÃ²ng   â”‚                             â”‚
â”‚   â”‚                  â”‚  â”‚ cáº¥p quyá»n truy   â”‚                             â”‚
â”‚   â”‚                  â”‚  â”‚ cáº­p vá»‹ trÃ­"      â”‚                             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚                       â”‚                                                     â”‚
â”‚                    â•â•â•â•ªâ•â•â•                                                  â”‚
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ Chá»¥p áº£nh Ä‘iá»ƒm danh (tÃ¹y chá»n)                                 â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                       â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       â”‚                        Há»† THá»NG                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ Gá»­i yÃªu cáº§u Ä‘iá»ƒm danh Ä‘áº¿n API                                  â”‚       â”‚
â”‚   â”‚ POST /api/activities/[id]/attendance                           â”‚       â”‚
â”‚   â”‚ - activityId                                                   â”‚       â”‚
â”‚   â”‚ - timeSlot                                                     â”‚       â”‚
â”‚   â”‚ - checkInType (start/end)                                      â”‚       â”‚
â”‚   â”‚ - location (lat, lng, address)                                 â”‚       â”‚
â”‚   â”‚ - photoUrl (optional)                                          â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ Kiá»ƒm tra xÃ¡c thá»±c (JWT token)                                  â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ TÃ¬m kiáº¿m hoáº¡t Ä‘á»™ng trong database                              â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ Kiá»ƒm tra user Ä‘Ã£ Ä‘Äƒng kÃ½ vÃ  Ä‘Æ°á»£c duyá»‡t                        â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ XÃ¡c Ä‘á»‹nh Ä‘á»‹a Ä‘iá»ƒm cho buá»•i Ä‘Æ°á»£c chá»n                          â”‚       â”‚
â”‚   â”‚ (locationData hoáº·c multiTimeLocations)                        â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ Kiá»ƒm tra vá»‹ trÃ­ Ä‘iá»ƒm danh cÃ³ trong pháº¡m vi cho phÃ©p           â”‚       â”‚
â”‚   â”‚ (TÃ­nh khoáº£ng cÃ¡ch báº±ng Haversine formula)                     â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”                                                  â”‚
â”‚                    â”‚ [Vá»‹ trÃ­]                                               â”‚
â”‚                    â”‚ há»£p lá»‡?                                                â”‚
â”‚                    â””â”€â”€â”¬â”€â”€â”˜                                                  â”‚
â”‚                       â”‚                                                     â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚          CÃ³â”‚                     â”‚KhÃ´ng                                   â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚            â–¼                     â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚   â”‚ Kiá»ƒm tra thá»i    â”‚  â”‚ Tráº£ vá» lá»—i:      â”‚                             â”‚
â”‚   â”‚ gian Ä‘iá»ƒm danh   â”‚  â”‚ "Vá»‹ trÃ­ Ä‘iá»ƒm danhâ”‚                             â”‚
â”‚   â”‚ (ÄÃºng giá»/Trá»…/   â”‚  â”‚ khÃ´ng há»£p lá»‡.    â”‚                             â”‚
â”‚   â”‚  Sá»›m)            â”‚  â”‚ Vui lÃ²ng Ä‘áº¿n Ä‘Ãºngâ”‚                             â”‚
â”‚   â”‚                  â”‚  â”‚ Ä‘á»‹a Ä‘iá»ƒm hoáº¡t    â”‚                             â”‚
â”‚   â”‚                  â”‚  â”‚ Ä‘á»™ng"            â”‚                             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚            â–¼                     â”‚                                         â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”       â”‚                                         â”‚
â”‚                    â”‚ [ÄÃºng giá»?] â”‚       â”‚                                         â”‚
â”‚                    â””â”€â”€â”¬â”€â”€â”˜       â”‚                                         â”‚
â”‚                       â”‚          â”‚                                         â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚          CÃ³â”‚                     â”‚Trá»…/Sá»›m                                 â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚            â–¼                     â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚   â”‚ TÃ¬m hoáº·c táº¡o     â”‚  â”‚ YÃªu cáº§u nháº­p lÃ½  â”‚                             â”‚
â”‚   â”‚ Attendance       â”‚  â”‚ do trá»…/sá»›m (náº¿u  â”‚                             â”‚
â”‚   â”‚ document         â”‚  â”‚ cáº§n)             â”‚                             â”‚
â”‚   â”‚                  â”‚  â”‚ Sau Ä‘Ã³ tiáº¿p tá»¥c  â”‚                             â”‚
â”‚   â”‚                  â”‚  â”‚                  â”‚                             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ ThÃªm attendance record vÃ o attendances[]                      â”‚       â”‚
â”‚   â”‚ vá»›i status: 'pending' (chá» duyá»‡t)                            â”‚       â”‚
â”‚   â”‚ - timeSlot                                                    â”‚       â”‚
â”‚   â”‚ - checkInType                                                 â”‚       â”‚
â”‚   â”‚ - checkInTime                                                 â”‚       â”‚
â”‚   â”‚ - location (lat, lng, address)                                â”‚       â”‚
â”‚   â”‚ - photoUrl (náº¿u cÃ³)                                           â”‚       â”‚
â”‚   â”‚ - status: 'pending'                                           â”‚       â”‚
â”‚   â”‚ - lateReason (náº¿u trá»…)                                        â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ Upload áº£nh lÃªn Cloudinary (náº¿u cÃ³)                            â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ LÆ°u trá»¯ thÃ´ng tin Ä‘iá»ƒm danh vÃ o database                      â”‚       â”‚
â”‚   â”‚ (Attendance collection)                                       â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ Tráº£ vá» káº¿t quáº£ Ä‘iá»ƒm danh                                       â”‚       â”‚
â”‚   â”‚ (thÃ nh cÃ´ng/tháº¥t báº¡i)                                          â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                       â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       â”‚                      SINH VIÃŠN                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”                                                  â”‚
â”‚                    â”‚ [Äiá»ƒm danh]                                           â”‚
â”‚                    â”‚ thÃ nh cÃ´ng?                                           â”‚
â”‚                    â””â”€â”€â”¬â”€â”€â”˜                                                  â”‚
â”‚                       â”‚                                                     â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚          CÃ³â”‚                     â”‚KhÃ´ng                                   â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚            â–¼                     â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚   â”‚ Hiá»ƒn thá»‹ thÃ´ng   â”‚  â”‚ Hiá»ƒn thá»‹ thÃ´ng   â”‚                             â”‚
â”‚   â”‚ bÃ¡o thÃ nh cÃ´ng:  â”‚  â”‚ bÃ¡o lá»—i          â”‚                             â”‚
â”‚   â”‚ "Äiá»ƒm danh thÃ nh â”‚  â”‚ Hiá»ƒn thá»‹ nÃºt     â”‚                             â”‚
â”‚   â”‚ cÃ´ng! Äang chá»   â”‚  â”‚ Ä‘iá»ƒm danh láº¡i    â”‚                             â”‚
â”‚   â”‚ duyá»‡t..."        â”‚  â”‚                  â”‚                             â”‚
â”‚   â”‚ Cáº­p nháº­t UI:     â”‚  â”‚                  â”‚                             â”‚
â”‚   â”‚ - Tráº¡ng thÃ¡i:    â”‚  â”‚                  â”‚                             â”‚
â”‚   â”‚   "ÄÃ£ Ä‘iá»ƒm danh  â”‚  â”‚                  â”‚                             â”‚
â”‚   â”‚   (chá» duyá»‡t)"   â”‚  â”‚                  â”‚                             â”‚
â”‚   â”‚ - Hiá»ƒn thá»‹ thá»i  â”‚  â”‚                  â”‚                             â”‚
â”‚   â”‚   gian Ä‘iá»ƒm danh â”‚  â”‚                  â”‚                             â”‚
â”‚   â”‚ - Hiá»ƒn thá»‹ vá»‹ trÃ­â”‚  â”‚                  â”‚                             â”‚
â”‚   â”‚ - Hiá»ƒn thá»‹ áº£nh   â”‚  â”‚                  â”‚                             â”‚
â”‚   â”‚   (náº¿u cÃ³)       â”‚  â”‚                  â”‚                             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚            â”‚                     â”‚                                         â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚                       â”‚                                                     â”‚
â”‚                    â•â•â•â•ªâ•â•â•                                                  â”‚
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ Xem thÃ´ng bÃ¡o vÃ  cáº­p nháº­t tráº¡ng thÃ¡i                           â”‚       â”‚
â”‚   â”‚ (Äiá»ƒm danh sáº½ Ä‘Æ°á»£c admin duyá»‡t sau)                            â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                       â”‚                                                     â”‚
â”‚                       â–¼                                                     â”‚
â”‚                    âš«                                                       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Tá»•ng Káº¿t So SÃ¡nh

| TiÃªu chÃ­ | SÆ¡ Ä‘á»“ hiá»‡n táº¡i | SÆ¡ Ä‘á»“ Ä‘á» xuáº¥t | Ghi chÃº |
|----------|----------------|---------------|---------|
| **Kiá»ƒm tra xÃ¡c thá»±c** | âŒ Thiáº¿u | âœ… CÃ³ | JWT token |
| **Kiá»ƒm tra Ä‘Äƒng kÃ½** | âŒ Thiáº¿u | âœ… CÃ³ | ÄÃ£ Ä‘Äƒng kÃ½ vÃ  Ä‘Æ°á»£c duyá»‡t |
| **Kiá»ƒm tra hoáº¡t Ä‘á»™ng** | âŒ Thiáº¿u | âœ… CÃ³ | Tá»“n táº¡i vÃ  tráº¡ng thÃ¡i há»£p lá»‡ |
| **YÃªu cáº§u GPS** | âŒ Thiáº¿u | âœ… CÃ³ | Quyá»n truy cáº­p vá»‹ trÃ­ |
| **Kiá»ƒm tra vá»‹ trÃ­** | âŒ Thiáº¿u | âœ… CÃ³ | Trong pháº¡m vi cho phÃ©p |
| **Chá»n buá»•i** | âŒ Thiáº¿u | âœ… CÃ³ | Buá»•i SÃ¡ng/Chiá»u/Tá»‘i |
| **Chá»n loáº¡i Ä‘iá»ƒm danh** | âŒ Thiáº¿u | âœ… CÃ³ | Start/End |
| **Chá»¥p áº£nh** | âŒ Thiáº¿u | âœ… CÃ³ | TÃ¹y chá»n |
| **Kiá»ƒm tra thá»i gian** | âŒ Thiáº¿u | âœ… CÃ³ | ÄÃºng giá»/Trá»…/Sá»›m |
| **LÃ½ do trá»…** | âŒ Thiáº¿u | âœ… CÃ³ | Nháº­p lÃ½ do náº¿u trá»… |
| **LÆ°u database** | âŒ Thiáº¿u | âœ… CÃ³ | Attendance collection |
| **Upload áº£nh** | âŒ Thiáº¿u | âœ… CÃ³ | Cloudinary |
| **Tráº¡ng thÃ¡i Ä‘iá»ƒm danh** | âŒ Thiáº¿u | âœ… CÃ³ | Pending/Approved/Rejected |
| **Multi-time locations** | âŒ Thiáº¿u | âœ… CÃ³ | Nhiá»u Ä‘á»‹a Ä‘iá»ƒm theo buá»•i |

---

## ğŸ¯ Káº¿t Luáº­n

### Äiá»ƒm Máº¡nh cá»§a SÆ¡ Äá»“ Hiá»‡n Táº¡i:
1. âœ… Cáº¥u trÃºc cÆ¡ báº£n Ä‘Ãºng
2. âœ… CÃ³ xá»­ lÃ½ lá»—i
3. âœ… PhÃ¢n chia swimlanes rÃµ rÃ ng

### Äiá»ƒm Yáº¿u Cáº§n Cáº£i Thiá»‡n:
1. âŒ **Thiáº¿u quÃ¡ nhiá»u bÆ°á»›c quan trá»ng** (10/14 bÆ°á»›c)
2. âŒ **KhÃ´ng pháº£n Ã¡nh Ä‘Ãºng há»‡ thá»‘ng thá»±c táº¿**
3. âŒ **Thiáº¿u cÃ¡c tÃ­nh nÄƒng chÃ­nh**: GPS, chá»¥p áº£nh, kiá»ƒm tra vá»‹ trÃ­
4. âŒ **KhÃ´ng cÃ³ lÆ°u trá»¯ dá»¯ liá»‡u**

### Äá» Xuáº¥t:
1. **Sá»­ dá»¥ng sÆ¡ Ä‘á»“ Ä‘á» xuáº¥t** á»Ÿ trÃªn Ä‘á»ƒ pháº£n Ã¡nh Ä‘Ãºng há»‡ thá»‘ng thá»±c táº¿
2. **Bá»• sung cÃ¡c bÆ°á»›c thiáº¿u** vÃ o sÆ¡ Ä‘á»“ hiá»‡n táº¡i
3. **Chi tiáº¿t hÃ³a cÃ¡c decision nodes** vá»›i Ä‘iá»u kiá»‡n cá»¥ thá»ƒ
4. **ThÃªm cÃ¡c bÆ°á»›c xá»­ lÃ½ lá»—i** chi tiáº¿t hÆ¡n
5. **Bá»• sung luá»“ng duyá»‡t Ä‘iá»ƒm danh** (admin/officer duyá»‡t sau khi sinh viÃªn Ä‘iá»ƒm danh)

---

**SÆ¡ Ä‘á»“ hiá»‡n táº¡i chá»‰ pháº£n Ã¡nh Ä‘Æ°á»£c khoáº£ng 30% luá»“ng thá»±c táº¿. Cáº§n bá»• sung thÃªm 70% cÃ²n láº¡i Ä‘á»ƒ Ä‘áº§y Ä‘á»§ vÃ  chÃ­nh xÃ¡c!** ğŸ¯

